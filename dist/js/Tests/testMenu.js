import*as utilMethods from"../utils.js";import{state}from"../state.js";import*as questionLogic from"../sharedQuestionLogic.js";import{mcQuizCreateOptions}from"./test_MultipleChoiceQuiz.js";window.onload=function(){var e,t,a=document.getElementById("operator-menu-forward"),i=document.getElementById("operator-test-menu-backward-upper"),o=document.getElementById("operator-test-menu-backward-lower"),r=document.getElementById("difficulty-menu-forward"),i=[i,o],o=[document.getElementById("difficulty-menu-backward-upper"),document.getElementById("difficulty-menu-backward-lower")],c=document.querySelectorAll(".activity-choice"),s=document.querySelectorAll(".real-choice");const l=document.getElementById("operator-alert-modal"),n=document.getElementById("operator-menu-container"),d=document.getElementById("real-menu-container"),u=document.getElementById("difficulty-menu-container");a.addEventListener("click",e=>{state.activeOperators=function(a){let i=[],o=0;for(let t=0;t<4;t++)if(a[t].classList.contains("active-operator")){let e;switch(a[t].getAttribute("id")){case"add":e="+";break;case"sub":e="-";break;case"mul":e="x";break;case"div":e="รท";break;default:e="+"}state.activeOperators.push(e),i.push(e),o++}return i}(g),sessionStorage.setItem("activeOperators",state.activeOperators),0==state.activeOperators.length?utilMethods.visibilityTimedToggle(!0,l,1100):utilMethods.changeViewRight(n,u)});for(e of i)e.addEventListener("click",e=>{utilMethods.changeViewLeft(d,n)});for(t of o)t.addEventListener("click",e=>{utilMethods.changeViewLeft(n,u)});function m(e){e.target.classList.toggle("active-operator")}r.addEventListener("click",e=>{{let e=state.activeDifficulty,t,a;switch(e){case 1:t=5,a=0;break;case 2:t=6,a=1;break;case 3:t=8,a=2;break;case 4:t=10,a=3;break;case 5:t=12,a=3}state.activeMultiplyLowVal=a,state.activeMultiplyHighVal=t,sessionStorage.setItem("activeMulitplyLowVal",a),sessionStorage.setItem("activeMultiplyHighVal",t),sessionStorage.setItem("activeDifficulty",e);var i=10*e;state.activeHighVal=i,sessionStorage.setItem("activeHighVal",i)}"multiple-choice-quiz"===sessionStorage.getItem("activity")?window.location.href="/multiple-choice-quiz":"game"===sessionStorage.getItem("activity")?window.location.href="/high-score-challenge":"quiz"===sessionStorage.getItem("activity")&&(window.location.href="pop-quiz")});const g=document.querySelectorAll(".operator-choice");var f,v=c;for(let a of v)a.addEventListener("click",e=>{v.forEach(e=>e.classList.remove("activity-selected"));let t;t=(e.target.getAttribute("data-type")?e.target:e.target.parentNode).getAttribute("data-type"),a.classList.add("activity-selected")});for(f of g)f.addEventListener("click",m);var y=s;for(let a of y)a.addEventListener("click",e=>{y.forEach(e=>e.classList.remove("activity-selected"));let t;t=(e.target.getAttribute("data-type")?e.target:e.target.parentNode).getAttribute("data-type"),a.classList.add("activity-selected")});var p=document.getElementById("range-input"),h=document.getElementById("range-value"),w=document.getElementById("level-text");p.addEventListener("input",()=>{var e=parseInt(p.value),t=(state.activeDifficulty=e,h.textContent=e,state.difficultyLevels[e].color);p.style.setProperty("--thumb-color",t),w.textContent=state.difficultyLevels[e].name})};